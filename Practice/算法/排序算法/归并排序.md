# 归并排序

## 思路：

- 分（Divide）：把数组从中间一分为二
- 治（Conquer）：递归地对左右两半分别排序
- 合（Merge）：把两个有序数组合并成一个有序数组

## 实现

```js
Array.prototype.mergeSort = function () {
  const rec = (arr) => {
    // 递归终止条件
    if (arr.length <= 1) return arr;

    const mid = Math.floor(arr.length / 2);
    const left = arr.slice(0, mid);
    const right = arr.slice(mid, arr.length); // 左闭又开

    const orderLeft = rec(left);
    const orderRight = rec(right);

    const res = []; // ✅ 每次合并创建新数组
    while (orderLeft.length || orderRight.length) {
      if (orderLeft.length && orderRight.length) {
        if (orderLeft[0] < orderRight[0]) {
          res.push(orderLeft.shift());
        } else {
          res.push(orderRight.shift());
        }
      } else if (orderLeft.length) {
        res.push(orderLeft.shift());
      } else if (orderRight.length) {
        res.push(orderRight.shift());
      }
    }
    return res;
  };
  rec(this).forEach((item, index) => (this[index] = item));
};
const arr = [5, 4, 7, 2, 9];
arr.mergeSort();
console.log(arr);
```

## 复杂度分析

- 时间复杂度：O(nlogn)
- 空间复杂度：O(n)
