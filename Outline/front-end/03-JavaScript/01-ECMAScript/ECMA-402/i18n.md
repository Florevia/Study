# Vue 3 + vue-i18n 国际化配置

## 1. 安装

```bash
npm install vue-i18n
```

## 2. 项目结构

```text
src/
├── locales/
│   ├── en.js        # 英文语言包
│   ├── zh.js        # 中文语言包
│   └── index.js     # i18n 配置入口
├── main.js          # 全局注册
└── App.vue          # 使用示例
```

## 3. 配置文件

### `src/locales/zh.js`

```js
export default {
  message: {
    // 区块
    hello: "你好，世界",
    welcome: "欢迎使用",
  },
};
```

### `src/locales/en.js`

```js
export default {
  message: {
    hello: "Hello World",
    welcome: "Welcome",
  },
};
```

### `src/locales/index.js`

```js
import { createI18n } from "vue-i18n"; // 从 vue-i18n 导入 createI18n
import zh from "./zh"; // 导入中文语言包
import en from "./en"; // 导入英文语言包
// 创建 i18n 实例
const i18n = createI18n({
  legacy: false, // 使用 Composition API 模式
  locale: "zh", // 默认语言（推荐从 localStorage / window.navigator.language 中读取）
  fallbackLocale: "en", // 回退语言（语言包中没有时使用）
  messages: {
    // 注册语言包
    zh,
    en,
  },
});
// 导出 i18n 实例
export default i18n;
```

## 4. 全局注册

### `src/main.js`

```js
import { createApp } from "vue";
import App from "./App.vue";
import i18n from "./locales";

const app = createApp(App);
app.use(i18n);
app.mount("#app");
```

## 5. 组件中使用

### `App.vue`

```vue
<template>
  <div>
    <!-- 模板中使用 -->
    <p>{{ $t("message.hello") }}</p>

    <!-- 切换语言 -->
    <button @click="changeLang('zh')">中文</button>
    <button @click="changeLang('en')">English</button>
  </div>
</template>

<script setup>
import { useI18n } from "vue-i18n";

const { locale, t } = useI18n();

// JS 中使用
import i18n from "./locales";
console.log(i18n.global.t("message.welcome"));

const changeLang = (lang) => {
  locale.value = lang;
};
</script>
```

## 6. 复杂国际化处理

### 6.1 变量插值 (Interpolation)

在翻译文本中插入变量。

```js
// en.js
{
  welcome: "Welcome, {name}!";
}
```

```html
<p>{{ $t('welcome', { name: 'Lilin' }) }}</p>
<!-- Output: Welcome, Lilin! -->
```

### 6.2 复数处理 (Pluralization)

处理单复数变化，使用 `|` 分隔。

```js
// en.js
{
  apple: "no apples | one apple | {count} apples";
}
```

```html
<p>{{ $tc('apple', 0) }}</p>
<!-- no apples -->
<p>{{ $tc('apple', 1) }}</p>
<!-- one apple -->
<p>{{ $tc('apple', 5) }}</p>
<!-- 5 apples -->
```

> **注意**: `$tc` 在 Vue I18n v9 中仍然可用，但更推荐使用 `$t` 配合新的复数语法或 ICU 格式。

### 6.3 数字与金额格式化 (Number Formatting)

```js
// main.js 配置
const numberFormats = {
  "en-US": {
    currency: { style: "currency", currency: "USD" },
  },
  "zh-CN": {
    currency: { style: "currency", currency: "CNY" },
  },
};

// createI18n({ ..., numberFormats })
```

```html
<p>{{ $n(100, 'currency') }}</p>
<!-- en-US: $100.00 -->
<!-- zh-CN: ¥100.00 -->
```

### 6.4 日期格式化 (Date Formatting)

```js
// main.js 配置
const datetimeFormats = {
  "en-US": {
    short: { year: "numeric", month: "short", day: "numeric" },
  },
  "zh-CN": {
    short: { year: "numeric", month: "short", day: "numeric" },
  },
};

// createI18n({ ..., datetimeFormats })
```

```html
<p>{{ $d(new Date(), 'short') }}</p>
<!-- en-US: Dec 29, 2025 -->
<!-- zh-CN: 2025年12月29日 -->
```

### 6.5 链接消息 (Linked Messages)

在一个翻译中引用另一个翻译。

```js
{
  address: "Address",
  account_address: "@:address: 123 Main St"
}
```
