# 前端渲染模式

## 服务端渲染

1. 服务器压力大
2. 首屏加载速度快
3. SEO 优化

### 服务端渲染流程

SSR 的核心：服务器先把“完整 HTML 内容”渲染好再返回，浏览器拿到 HTML 就能更快看到真实内容；但要“能点能交互”，通常还需要客户端 JS 做 Hydration（注水/激活）

```yaml
用户/浏览器
|
| 1) GET /page
v
Server（跑渲染逻辑）
|
| 2) 路由匹配 + 取数据（DB/API）
| 3) renderToString / 模板渲染 => 生成完整 HTML
| 4) 注入首屏数据（__INITIAL_STATE__）
v
返回“完整 HTML”（已有真实内容）
|
| 5) 浏览器立即渲染出首屏（更快看到内容）
v
浏览器下载 JS Bundle
|
| 6) Hydration：对现有 HTML“注水激活”
|    - 建立组件树映射
|    - 绑定事件
v
✅ 页面可见（更早） + ✅ 可交互（hydration 后）
```

```pgsql
Browser                   SSR Server                    API/DB
  |  GET /page  ------------->|                           |
  |                           |-- query data ------------->|
  |                           |<----------- data ----------|
  |                           |-- render HTML (with data)  |
  |  <--- HTML(真实内容) ------|                           |
  |  (paint首屏内容)           |                           |
  |  GET app.js -------------->|                           |
  |  <--- app.js --------------|                           |
  |  (hydrate: bind events)    |                           |
  |  ✅ interactive             |                           |

```

## 客户端渲染

1. 首屏加载速度快
2. SEO 优化
3. 服务器压力大

### 客户端渲染流程

CSR 的核心：服务器先返回一个很“空”的 HTML 壳子，真正的页面结构和内容主要由 浏览器下载 JS 后在客户端生成。

```yaml
用户/浏览器
|
| 1) GET /page
v
CDN/Server
|
| 2) 返回 HTML Shell（基本空）
v
浏览器解析 HTML
|
| 3) 请求 JS/CSS/字体等静态资源
v
下载 JS Bundle + 解析执行
|
| 4) 框架启动（Router/Store/App 初始化）
v
客户端请求数据（API）
|
| 5) 等待接口返回
v
客户端渲染 DOM（生成真实页面）
|
| 6) 绑定事件监听
v
✅ 页面可见 + ✅ 可交互
```

```pgsql
Browser                Server/CDN                API
  |  GET /page  ----------->|                     |
  |  <--- HTML Shell --------|                     |
  |  GET app.js ------------>|                     |
  |  <--- app.js ------------|                     |
  |  (execute JS, init)      |                     |
  |  GET /api/data ------------------------------->|
  |  <------------------------------ data ---------|
  |  render DOM + bind events                       |
  |  ✅ interactive                                 |
```
