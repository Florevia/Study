# 前端渲染模式

## 服务端渲染

1. 服务器压力大
2. 首屏加载速度快
3. SEO 优化

### 服务端渲染流程

- SSR 的核心：服务器先把“完整 HTML 内容”渲染好再返回，浏览器拿到 HTML 就能更快看到真实内容；但要“能点能交互”，通常还需要客户端 JS 做 Hydration（注水/激活）

```mermaid
sequenceDiagram
    participant B as 浏览器
    participant S as SSR Server
    participant API as API/DB

    B->>S: 1) GET /page
    S->>API: 2) 路由匹配 + 取数据
    API-->>S: 返回数据
    Note over S: 3) renderToString 生成完整 HTML
    Note over S: 4) 注入 __INITIAL_STATE__
    S-->>B: 返回完整 HTML（已有真实内容）
    Note over B: 5) 立即渲染首屏（更快看到内容）
    B->>S: 请求 JS Bundle
    S-->>B: 返回 app.js
    Note over B: 6) Hydration 注水激活
    Note over B: ✅ 页面可见 + ✅ 可交互
```

---

## 客户端渲染

1. 首屏加载速度快
2. SEO 优化
3. 服务器压力大

### 客户端渲染流程

- CSR 的核心：服务器先返回一个很“空”的 HTML 壳子，真正的页面结构和内容主要由 浏览器下载 JS 后在客户端生成。

```mermaid
sequenceDiagram
    participant B as 浏览器
    participant S as CDN/Server
    participant API as API

    B->>S: 1) GET /page
    S-->>B: 2) 返回 HTML Shell（基本空）
    Note over B: 解析 HTML
    B->>S: 3) 请求 JS/CSS 静态资源
    S-->>B: 返回 app.js
    Note over B: 4) 框架启动初始化
    B->>API: 5) 请求数据
    API-->>B: 返回数据
    Note over B: 6) 客户端渲染 DOM + 绑定事件
    Note over B: ✅ 页面可见 + ✅ 可交互
```
